<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>é£æœºåœº3å°æ—¶å‰§æƒ…</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764baa 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    #root {
      width: 100%;
      max-width: 900px;
      height: 700px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .top-frame {
      height: 80px;
      background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .top-frame h1 {
      color: white;
      font-size: 28px;
      font-weight: 600;
      letter-spacing: 1px;
    }

    .water-indicator {
      position: absolute;
      right: 30px;
      background: rgba(255, 255, 255, 0.2);
      padding: 8px 16px;
      border-radius: 20px;
      color: white;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .water-indicator::before {
      content: "ğŸ’§";
      font-size: 18px;
    }

    .middle-frame {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 30px;
      gap: 25px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 10px;
    }

    .flight-time {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      color: white;
      padding: 10px 20px;
      border-radius: 25px;
      font-weight: 600;
      font-size: 16px;
      box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .flight-time::before {
      content: "âœˆï¸";
      font-size: 18px;
    }

    #time-label {
      background: linear-gradient(135deg, #667eea 0%, #764baa 100%);
      color: white;
      padding: 10px 20px;
      border-radius: 25px;
      font-weight: 600;
      font-size: 16px;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    #story-text {
      flex: 1;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border: none;
      border-radius: 15px;
      padding: 30px;
      font-size: 18px;
      line-height: 1.8;
      color: #2d3748;
      resize: none;
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    #story-text:focus {
      outline: none;
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.15), 0 0 0 3px rgba(102, 126, 234, 0.2);
    }

    .bottom-bar {
      display: flex;
      justify-content: center;
      gap: 20px;
      padding: 20px 0;
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 30px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      position: relative;
      overflow: hidden;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
    }

    button:disabled {
      background: #cbd5e0;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .btn-left {
      display: flex;
      gap: 20px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .middle-frame > * {
      animation: fadeIn 0.6s ease-out;
    }

    @media (max-width: 768px) {
      #root {
        height: auto;
        min-height: 600px;
        margin: 10px;
      }

      .top-frame {
        height: 70px;
      }

      .top-frame h1 {
        font-size: 24px;
      }

      .water-indicator {
        right: 20px;
        padding: 6px 12px;
        font-size: 14px;
      }

      .flight-time {
        padding: 8px 16px;
        font-size: 14px;
      }

      .middle-frame {
        padding: 20px;
        gap: 20px;
      }

      #story-text {
        padding: 20px;
        font-size: 16px;
      }

      button {
        padding: 12px 30px;
        font-size: 14px;
      }

      .btn-left {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
<div id="root">
  <div class="top-frame">
    <h1>âœˆï¸ é£æœºåœº3å°æ—¶å‰§æƒ…</h1>
    <div class="water-indicator">
      <span id="water-label">0 ml</span>
    </div>
  </div>

  <div class="middle-frame">
    <div class="top-bar">
      <div class="flight-time" id="flight-time">èˆªç­èµ·é£: --</div>
      <div id="time-label">--</div>
    </div>

    <textarea id="story-text" readonly>æ¬¢è¿æ¥åˆ°é£æœºåœº3å°æ—¶å‰§æƒ…æ¸¸æˆï¼
ç‚¹å‡»å¼€å§‹æŒ‰é’®å³å¯å¼€å§‹ä½ çš„æœºåœºå†’é™©ä¹‹æ—…</textarea>

    <div class="bottom-bar">
      <div class="btn-left">
        <button id="button-1">ğŸ® å¼€å§‹æ¸¸æˆ</button>
        <button id="button-2">ğŸ¯ å¼€å§‹æ¸¸æˆ</button>
      </div>
    </div>
  </div>
</div>

<script>
// æ¸¸æˆå…¨å±€çŠ¶æ€
const user = { name: 'ç©å®¶', id: 1 };
let chapter = 0;
let airportTime = null;
let drinkWater = 0;
let money = 80;
let goods = {};
let toiletQueueCount = 6; // å•æ‰€æ’é˜Ÿäººæ•°
const items = [
  ['å«ç”Ÿå·¾', 10],
  ['çŸ¿æ³‰æ°´', 3],
  ['å«ç”Ÿçº¸', 5],
  ['å¤‡ç”¨å†…è£¤', 20],
  ['å¤‡ç”¨é•¿è£¤', 80],
  ['å¤‡ç”¨æ‰“åº•è£¤', 50]
];
const itemEffects = {
  'å«ç”Ÿå·¾': 'å°¿2s',
  'çŸ¿æ³‰æ°´': 'å°¿1s',
  'å«ç”Ÿçº¸': 'å°¿3s',
  'å¤‡ç”¨å†…è£¤': 'å¯ä»¥å¤±ç¦',
  'å¤‡ç”¨é•¿è£¤': 'å¯ä»¥å°¿ä¸€åŠ',
  'å¤‡ç”¨æ‰“åº•è£¤': 'å¯ä»¥å°¿ä¸‰åˆ†ä¹‹ä¸€'
};

// ç®€åŒ–DOMè·å–
function $(id) {
  return document.getElementById(id);
}

// æ›´æ–°å½“å‰æ—¶é—´å’Œèˆªç­å€’è®¡æ—¶
function updateTime() {
  const now = new Date();
  $('time-label').textContent = now.toLocaleString('zh-CN');

  // æ£€æŸ¥æ˜¯å¦é”™è¿‡èˆªç­
  if (airportTime && airportTime < Date.now() / 1000) {
    alert('èˆªç­å·²ç»é”™è¿‡,è¯·é‡æ–°å¼€å§‹ï¼ï¼');
    resetStory();
  }

  // æ¯ç§’æ›´æ–°ä¸€æ¬¡
  setTimeout(updateTime, 1000);
}
updateTime();

// é‡ç½®æ¸¸æˆçŠ¶æ€
function resetStory() {
  chapter = 0;
  airportTime = null;
  drinkWater = 0;
  money = 80;
  goods = {};
  toiletQueueCount = 6;
  $('flight-time').textContent = 'èˆªç­èµ·é£: --';
  $('water-label').textContent = `${drinkWater} ml`;
  refreshUI(
    'æ¬¢è¿æ¥åˆ°é£æœºåœº3å°æ—¶å‰§æƒ…æ¸¸æˆï¼\nç‚¹å‡»å¼€å§‹æŒ‰é’®å³å¯å¼€å§‹ä½ çš„æœºåœºå†’é™©ä¹‹æ—…',
    'ğŸ® å¼€å§‹æ¸¸æˆ',
    'ğŸ¯ å¼€å§‹æ¸¸æˆ'
  );
}

// åˆ·æ–°é¡µé¢UI
function refreshUI(text, b1, b2) {
  $('story-text').value = text;
  $('button-1').textContent = b1;
  $('button-2').textContent = b2;
  $('water-label').textContent = `${drinkWater} ml`;
  [$('button-1'), $('button-2')].forEach(b => b.disabled = false);
}

// ç¦ç”¨æŒ‰é’®
function disableButtons() {
  $('button-1').disabled = true;
  $('button-2').disabled = true;
}

// è®°å½•ç”¨æˆ·æ“ä½œæ—¥å¿—
function logBehavior(btnName) {
  console.log(`[LOG] ç”¨æˆ·${user.id} ç‚¹å‡» ${btnName}`);
}

// ç¡çœ å‡½æ•°ï¼ˆå‚æ•°ï¼šç§’ï¼ŒçœŸå®ç­‰å¾…æ—¶é•¿ï¼‰
function sleep(t) {
  return new Promise(r => setTimeout(r, t * 1000));
}

// æ ¼å¼åŒ–æ—¶é—´æˆ³ä¸ºå¯è¯»æ ¼å¼
function formatTime(timestamp) {
  const date = new Date(timestamp * 1000);
  return date.toLocaleString('zh-CN');
}

// ç”Ÿæˆ1-6çš„éšæœºéª°å­æ•°
function rollDice() {
  return Math.floor(Math.random() * 6) + 1;
}

// å•†åº—ç³»ç»Ÿ
function openShop(initMoney) {
  let m = initMoney;
  let g = { ...goods };

  // æ„å»ºå•†å“åˆ—è¡¨
  let list = items.map((it, i) => `${i}. ${it[0]} ${it[1]}å…ƒ`).join('\n');

  while (true) {
    let ans = prompt(`å°å°å•†åº—\n${list}\n\næŒæœ‰é‡‘é’±: ${m}å…ƒ\nè¾“å…¥åºå·è´­ä¹°ï¼Œç•™ç©ºæˆ–å–æ¶ˆé€€å‡º`);

    if (ans === null || ans === '') break;

    let idx = parseInt(ans);
    if (isNaN(idx) || idx < 0 || idx >= items.length) {
      alert('æ— æ•ˆåºå·ï¼Œè¯·é‡æ–°è¾“å…¥');
      continue;
    }

    let [name, price] = items[idx];
    if (m < price) {
      alert(`ä½™é¢ä¸è¶³ï¼å½“å‰ä½™é¢ï¼š${m}å…ƒï¼Œå•†å“ä»·æ ¼ï¼š${price}å…ƒ`);
      continue;
    }

    if (!confirm(`æ˜¯å¦èŠ±è´¹${price}å…ƒè´­ä¹°${name}?`)) continue;

    // æ‰£é™¤é‡‘é’±å¹¶æ·»åŠ å•†å“
    m -= price;
    g[name] = (g[name] || 0) + 1;
    alert(`è´­ä¹°æˆåŠŸï¼å·²è·å¾—${name}ï¼Œå‰©ä½™ä½™é¢ï¼š${m}å…ƒ`);
  }

  goods = g;
  return m;
}

// æ„å»ºæŒæœ‰ç‰©å“æ–‡æœ¬
function getGoodsText() {
  let tep = '';
  if (Object.keys(goods).length > 0) {
    for (const [name, num] of Object.entries(goods)) {
      tep += `${name} ${num}ä¸ª\n`;
    }
    tep += '\nä½œç”¨ï¼š\n';
    for (const [name, effect] of Object.entries(itemEffects)) {
      if (goods[name]) {
        tep += `${name}ï¼š${effect}\n`;
      }
    }
  }
  return tep || 'ä½ æ²¡æœ‰è´­ä¹°ä»»ä½•ç‰©å“';
}

// æŒ‰é’®1ç‚¹å‡»äº‹ä»¶å¤„ç†ï¼ˆå»æœºåœºåˆ†æ”¯ä¸ºä¸»ï¼Œå¯¹åº”Python _on_button_1ï¼‰
async function handleButton1() {
  logBehavior($('button-1').textContent);
  switch(chapter) {
    case 0:
      // å¼€å§‹æ¸¸æˆ
      airportTime = Date.now() / 1000 + 3 * 3600;
      const flightTimeStr = formatTime(airportTime);
      $('flight-time').textContent = `èˆªç­èµ·é£: ${flightTimeStr}`;
      refreshUI(
        'èƒŒæ™¯ï¼šä½ ç°åœ¨åœ¨å®¶è¿˜æœ‰3å°æ—¶å°±è¦ä¸Šèˆªç­äº†\nä½ æ„Ÿåˆ°æœ‰ç‚¹å£æ¸´å°±å–äº†1ç“¶å†œå¤«å±±æ³‰\n\nä»»åŠ¡ï¼šå–æ°´500ml',
        'ğŸ¥¤ å–æ°´500ml',
        'ğŸ¥¤ å–æ°´500ml'
      );
      chapter = 1;
      break;

    case 1:
      // å–æ°´
      drinkWater += 500;
      refreshUI(
        'å–å®Œæ°´ä¹‹åå‘ç°æ—¶é—´è¿˜æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´\næ˜¯å¦è¦å‡ºå‘å»æœºåœº\nä¸å»æœºåœºå¯ä»¥ç­‰å¾…10åˆ†é’Ÿç­‰åˆ°å‡ºç§Ÿè½¦\nå»æœºåœºåˆ™éœ€è¦åšåœ°é“å»\n\nä»»åŠ¡ï¼šå†³å®šæ˜¯å¦è¦å‡ºå‘å»æœºåœº',
        'ğŸš‡ å»æœºåœº',
        'ğŸš· ä¸å»æœºåœº(ç­‰å¾…10åˆ†é’Ÿ)'
      );
      chapter = 2;
      break;

    case 2:
      // é€‰æ‹©å»æœºåœºï¼Œä¸‹æ¥¼å»åœ°é“ç«™
      refreshUI(
        'ç°åœ¨ä½ éœ€è¦ä¸‹æ¥¼\nç„¶åèµ°åˆ°åœ°é“ç«™\n\nä»»åŠ¡ï¼šå·¦å³æŠ¬è…¿30æ¬¡(å·¦æŠ¬ç®—ä¸€æ¬¡ï¼Œå³æŠ¬ä¹Ÿç®—ä¸€æ¬¡)+èµ°40æ­¥ï¼Œç­‰å¾…5åˆ†é’Ÿ',
        'ğŸƒ å®ŒæˆåŠ¨ä½œå¹¶ç­‰å¾…',
        'ğŸƒ å®ŒæˆåŠ¨ä½œå¹¶ç­‰å¾…'
      );
      chapter = 3;
      break;

    case 3:
      // ç­‰å¾…5åˆ†é’Ÿååˆ°åœ°é“ç«™
      disableButtons();
      await sleep(5 * 60); // 5åˆ†é’Ÿç­‰å¾…
      refreshUI(
        'ç°åœ¨ä½ åˆ°äº†åœ°é“ç«™éœ€è¦ç­‰è½¦\nä½†æ˜¯è½¦å¾ˆå¤šéƒ½æ˜¯æ»¡äººçš„\nä½ éœ€è¦ç­‰åˆ°ä¸€éƒ¨æ²¡ä»€ä¹ˆäººçš„è½¦\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1(æ¯æŠ•ä¸€æ¬¡éœ€è¦ç­‰å¾…3åˆ†é’Ÿ)',
        'ğŸ² æŠ•éª°å­',
        'ğŸ² æŠ•éª°å­'
      );
      chapter = 4;
      break;

    case 4:
      // åœ°é“ç«™æŠ•éª°å­
      disableButtons();
      const dice1 = rollDice();
      if (dice1 === 1) {
        refreshUI(
          'æ­å–œï¼éª°å­æŠ•åˆ°1\nç°åœ¨ä½ ä¸Šäº†è½¦\nç­‰å¾…5åˆ†é’Ÿåˆ°è¾¾æœºåœº\n\nä»»åŠ¡ï¼šç­‰å¾…5åˆ†é’Ÿ',
          'â° ç­‰å¾…5åˆ†é’Ÿ',
          'â° ç­‰å¾…5åˆ†é’Ÿ'
        );
        chapter = 5;
      } else {
        refreshUI(
          `éª°å­æŠ•åˆ°${dice1}ï¼Œæœªè¾¾æ ‡\nç°åœ¨ä½ åˆ°äº†åœ°é“ç«™éœ€è¦ç­‰è½¦\nä½†æ˜¯è½¦å¾ˆå¤šéƒ½æ˜¯æ»¡äººçš„\nä½ éœ€è¦ç­‰åˆ°ä¸€éƒ¨æ²¡ä»€ä¹ˆäººçš„è½¦\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1(æ¯æŠ•ä¸€æ¬¡éœ€è¦ç­‰å¾…3åˆ†é’Ÿ)\nå½“å‰éª°å­æ•°ï¼š${dice1}`,
          'ğŸ² é‡æ–°æŠ•éª°å­',
          'ğŸ² é‡æ–°æŠ•éª°å­'
        );
        await sleep(3 * 60); // 3åˆ†é’Ÿç­‰å¾…
        chapter = 4; // ç»§ç»­æŠ•éª°å­
      }
      break;

    case 5:
      // ç­‰å¾…5åˆ†é’Ÿåˆ°è¾¾æœºåœº
      disableButtons();
      await sleep(5 * 60); // 5åˆ†é’Ÿç­‰å¾…
      drinkWater += 300; // åˆ°è¾¾æœºåœºå£æ¸´å–æ°´
      refreshUI(
        'ä½ åˆ°è¾¾äº†æœºåœºå‰é¢äººå¾ˆå¤š\nä½ éœ€è¦æ’é˜Ÿè¿›å…¥\nä½ è¿˜æ„Ÿåˆ°äº†å£æ¸´å–äº†300mlæ°´\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1(æ¯æ¬¡æŠ•éœ€è¦ç­‰å¾…2åˆ†é’Ÿ)',
        'ğŸ² æŠ•éª°å­åˆ°1',
        'ğŸ² æŠ•éª°å­åˆ°1'
      );
      chapter = 8;
      break;

    case 6:
      // å‡ºç§Ÿè½¦å‰å¾€æœºåœºï¼ˆä¸å»æœºåœºåˆ†æ”¯åç»­ï¼‰
      refreshUI(
        'ä½ ä¸Šäº†å‡ºç§Ÿè½¦ï¼Œéœ€è¦15åˆ†é’Ÿåˆ°è¾¾æœºåœº\n\nä»»åŠ¡ï¼šç­‰å¾…15åˆ†é’Ÿ',
        'â³ ç­‰å¾…15åˆ†é’Ÿ',
        'â³ ç­‰å¾…15åˆ†é’Ÿ'
      );
      chapter = 7;
      break;

    case 7:
      // å‡ºç§Ÿè½¦ç­‰å¾…15åˆ†é’Ÿåˆ°è¾¾æœºåœº
      disableButtons();
      await sleep(15 * 60); // 15åˆ†é’Ÿç­‰å¾…
      drinkWater += 300; // åˆ°è¾¾æœºåœºå£æ¸´å–æ°´
      refreshUI(
        'ä½ åˆ°è¾¾äº†æœºåœºå‰é¢äººå¾ˆå¤š\nä½ éœ€è¦æ’é˜Ÿè¿›å…¥\nä½ è¿˜æ„Ÿåˆ°äº†å£æ¸´å–äº†300mlæ°´\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1(æ¯æ¬¡æŠ•éœ€è¦ç­‰å¾…2åˆ†é’Ÿ)',
        'ğŸ² æŠ•éª°å­åˆ°1+å–æ°´300ml',
        'ğŸ² æŠ•éª°å­åˆ°1+å–æ°´300ml'
      );
      chapter = 8;
      break;

    case 8:
      // æœºåœºæ’é˜ŸæŠ•éª°å­
      disableButtons();
      const dice2 = rollDice();
      if (dice2 === 1) {
        refreshUI(
          'æ­å–œï¼éª°å­æŠ•åˆ°1\nä½ åˆ°è¾¾äº†æœºåœºé‡Œé¢\næ‰¾åˆ°äº†è‡ªå·±çš„ä½ç½®åäº†ä¸‹æ¥\n\nä»»åŠ¡ï¼šèµ°10æ­¥åä¸‹',
          'ğŸš¶ èµ°10æ­¥åä¸‹',
          'ğŸš¶ èµ°10æ­¥åä¸‹'
        );
        chapter = 9;
      } else {
        refreshUI(
          `éª°å­æŠ•åˆ°${dice2}ï¼Œæœªè¾¾æ ‡\nä½ åˆ°è¾¾äº†æœºåœºå‰é¢äººå¾ˆå¤š\nä½ éœ€è¦æ’é˜Ÿè¿›å…¥\nä½ è¿˜æ„Ÿåˆ°äº†å£æ¸´å–äº†300mlæ°´\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1(æ¯æ¬¡æŠ•éœ€è¦ç­‰å¾…2åˆ†é’Ÿ)\nå½“å‰éª°å­æ•°ï¼š${dice2}`,
          'ğŸ² é‡æ–°æŠ•éª°å­',
          'ğŸ² é‡æ–°æŠ•éª°å­'
        );
        await sleep(2 * 60); // 2åˆ†é’Ÿç­‰å¾…
        chapter = 8; // ç»§ç»­æŠ•éª°å­
      }
      break;

    case 9:
      // æœºåœºå†…é—²é€›
      refreshUI(
        'ä½ å‘ç°è·ç¦»é£æœºèµ·é£æ—¶é—´è¿˜æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´\nå°±å»æœºåœºçš„é™„è¿‘é€›é€›\n\nä»»åŠ¡ï¼šèµ°20æ­¥(ç­‰å¾…2åˆ†é’Ÿ)',
        'ğŸš¶ èµ°20æ­¥(ç­‰å¾…2åˆ†é’Ÿ)',
        'ğŸš¶ èµ°20æ­¥(ç­‰å¾…2åˆ†é’Ÿ)'
      );
      chapter = 10;
      break;

    case 10:
      // é—²é€›ç­‰å¾…2åˆ†é’Ÿï¼Œå‘ç°ä¾¿åˆ©åº—
      disableButtons();
      await sleep(2 * 60); // 2åˆ†é’Ÿç­‰å¾…
      refreshUI(
        'é€›çš„æ—¶å€™å‘ç°äº†ä¾¿åˆ©åº—\nåœ¨é—¨å£çŠ¹è±«æ˜¯å¦è¦è¿›å»\nèº«ä¸Šå¸¦çš„é’±æ²¡é‚£ä¹ˆå¤š\n\nä»»åŠ¡ï¼šé€‰æ‹©è¿›å»ä¸å¦',
        'ğŸ›’ è¿›å…¥ä¾¿åˆ©åº—',
        'ğŸšª ä¸è¿›å»(åœ¨é—¨å£çŠ¹è±«äº†3åˆ†é’Ÿ)'
      );
      chapter = 11;
      break;

    case 11:
      // è¿›å…¥ä¾¿åˆ©åº—è´­ç‰©
      disableButtons();
      money = openShop(money);
      refreshUI(
        'ç°åœ¨ä½ æƒ³å›åˆ°åŸæœ¬çš„åº§ä½äº†\nä½†æ˜¯è¢«æ­£åœ¨ç™»æœºçš„äººå µç€äº†\nä½ åœ¨ä¸€å±‚å±‚åœ°çªç ´äººç¾¤\n\nä»»åŠ¡ï¼šæŠ•éª°å­åˆ°2æ¯æ¬¡éª°éª°å­éœ€è¦ç­‰å¾…2åˆ†é’Ÿ',
        'ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­',
        'ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­'
      );
      chapter = 12;
      break;

    case 12:
      // çªç ´äººç¾¤æŠ•éª°å­ï¼ˆç›®æ ‡2ï¼‰
      disableButtons();
      const dice3 = rollDice();
      if (dice3 === 2) {
        refreshUI(
          'æ­å–œï¼éª°å­æŠ•åˆ°2\nç°åœ¨å›åˆ°åŸæœ¬çš„åº§ä½äº†\nä¸çŸ¥é“åšä»€ä¹ˆå°±ååœ¨åŸä½ç©èµ·äº†æ‰‹æœº\næ„Ÿåˆ°äº†å£æ¸´å–äº†300mlæ°´\n\nä»»åŠ¡ï¼šä»»æ„å§¿åŠ¿ä¿æŒ10åˆ†é’Ÿï¼Œå–300mlæ°´',
          'ğŸ“± ä¿æŒ10åˆ†é’Ÿ+å–300mlæ°´',
          'ğŸ“± ä¿æŒ10åˆ†é’Ÿ+å–300mlæ°´'
        );
        chapter = 13;
      } else {
        refreshUI(
          `éª°å­æŠ•åˆ°${dice3}ï¼Œæœªè¾¾æ ‡\nç°åœ¨ä½ æƒ³å›åˆ°åŸæœ¬çš„åº§ä½äº†\nä½†æ˜¯è¢«æ­£åœ¨ç™»æœºçš„äººå µç€äº†\nä½ åœ¨ä¸€å±‚å±‚åœ°çªç ´äººç¾¤\n\nä»»åŠ¡ï¼šæŠ•éª°å­åˆ°2æ¯æ¬¡éª°éª°å­éœ€è¦ç­‰å¾…2åˆ†é’Ÿ\nå½“å‰éª°å­æ•°ï¼š${dice3}`,
          'ğŸ² é‡æ–°æŠ•éª°å­',
          'ğŸ² é‡æ–°æŠ•éª°å­'
        );
        await sleep(2 * 60); // 2åˆ†é’Ÿç­‰å¾…
        chapter = 12; // ç»§ç»­æŠ•éª°å­
      }
      break;

    case 13:
      // ä¿æŒ10åˆ†é’Ÿè§¦å‘å°¿æ„
      disableButtons();
      drinkWater += 300; // å–æ°´
      await sleep(10 * 60); // 10åˆ†é’Ÿç­‰å¾…
      refreshUI(
        'çªç„¶ä½ æ„Ÿåˆ°æœ‰ç‚¹æƒ³å°¿å°¿\nä½ åœ¨çŠ¹è±«åˆ°åº•è¦ä¸è¦å»å•æ‰€\n\nä»»åŠ¡ï¼šé€‰æ‹©æ˜¯å¦å»å•æ‰€',
        'ğŸš» å»å•æ‰€(èµ°20æ­¥)',
        'ğŸ“± ä¸å»å•æ‰€ç»§ç»­åˆ·æ‰‹æœº(ç­‰å¾…10åˆ†é’Ÿ)'
      );
      chapter = 14;
      break;

    case 14:
      // å»å•æ‰€æ’é˜Ÿ
      refreshUI(
        `ä½ æŠµè¾¾äº†å•æ‰€éœ€è¦æ’é˜Ÿï¼Œè¿˜æœ‰ä¸€äº›äººæ’é˜Ÿ\nå½“å‰å‰é¢æœ‰${toiletQueueCount}ä¸ªäºº\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1`,
        'ğŸ² æŠ•éª°å­',
        'ğŸ² æŠ•éª°å­'
      );
      chapter = 15;
      break;

    case 15:
      // å•æ‰€æ’é˜ŸæŠ•éª°å­
      disableButtons();
      const dice4 = rollDice();
      if (dice4 === 1) {
        refreshUI(
          'æ­å–œï¼éª°å­æŠ•åˆ°1\nä½ è¿›å…¥äº†å•æ‰€å¯ä»¥å°¿3s,ç„¶åå›åˆ°äº†åŸåº§ä½\n\nä»»åŠ¡ï¼šå°¿3s+èµ°20æ­¥',
          'ğŸš½ å°¿3s+èµ°20æ­¥',
          'ğŸš½ å°¿3s+èµ°20æ­¥'
        );
        chapter = 16;
      } else {
        toiletQueueCount -= 1; // æ’é˜Ÿäººæ•°å‡å°‘
        refreshUI(
          `éª°å­æŠ•åˆ°${dice4}ï¼Œæœªè¾¾æ ‡\nä½ æŠµè¾¾äº†å•æ‰€éœ€è¦æ’é˜Ÿï¼Œè¿˜æœ‰ä¸€äº›äººæ’é˜Ÿ\nå‰é¢æœ‰${toiletQueueCount}ä¸ªäºº\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1\nå½“å‰éª°å­æ•°ï¼š${dice4}`,
          'ğŸ² é‡æ–°æŠ•éª°å­',
          'ğŸ² é‡æ–°æŠ•éª°å­'
        );
        await sleep(2 * 60); // 2åˆ†é’Ÿç­‰å¾…
        chapter = 15; // ç»§ç»­æŠ•éª°å­
      }
      break;

    case 16:
      // å°¿åå›åˆ°åº§ä½ï¼Œå£æ¸´å–æ°´
      refreshUI(
        'ä½ ç°åœ¨è§‰å¾—æœ‰ç‚¹å£æ¸´,å–äº†ç‚¹æ°´\n\nä»»åŠ¡ï¼šå–300mlæ°´',
        'ğŸ¥¤ å–300mlæ°´',
        'ğŸ¥¤ å–300mlæ°´'
      );
      chapter = 17;
      break;

    case 17:
      // å±•ç¤ºæŒæœ‰ç‰©å“å’Œé“å…·ä½œç”¨
      drinkWater += 300; // å–æ°´
      const goodsText = getGoodsText();
      refreshUI(
        `ç°åœ¨è·ç¦»èˆªç­åªæœ‰åŠå°æ—¶äº†ï¼Œä½ ç°åœ¨æƒ³èµ·äº†ä½ ä¹°çš„ä¸œè¥¿:\n\n${goodsText}`,
        'ğŸ› ä½¿ç”¨é“å…·',
        'ğŸ› ä½¿ç”¨é“å…·'
      );
      chapter = 18;
      break;

    case 18:
      // ä½¿ç”¨é“å…·ï¼Œå‡†å¤‡ç™»æœº
      refreshUI(
        'é©¬ä¸Šé£æœºå°±è¦èµ·é£äº†\nä½ æ„Ÿåˆ°æ¥ä¸åŠäº†å°±é£å¿«åœ°è·‘äº†è¿‡å»\n\nä»»åŠ¡ï¼šé«˜æŠ¬è…¿1åˆ†é’Ÿ+å·¦å³æŠ¬è…¿å…±20æ¬¡',
        'ğŸƒ é«˜æŠ¬è…¿1åˆ†é’Ÿ+å·¦å³æŠ¬è…¿20æ¬¡',
        'ğŸƒ é«˜æŠ¬è…¿1åˆ†é’Ÿ+å·¦å³æŠ¬è…¿20æ¬¡'
      );
      chapter = 19;
      break;

    case 19:
      // æˆåŠŸç™»æœºï¼Œå¯æ’å°¿
      refreshUI(
        'æ­å–œä¸Šäº†é£æœºç°åœ¨å¯ä»¥å°¿å°¿äº†\n\nä»»åŠ¡ï¼šæ’å®Œæ‰€æœ‰çš„å°¿',
        'ğŸ‰ æ’å®Œæ‰€æœ‰çš„å°¿',
        'ğŸ‰ æ’å®Œæ‰€æœ‰çš„å°¿'
      );
      chapter = 20;
      break;

    case 20:
      // æ¸¸æˆé€šå…³ï¼Œè¯¢é—®æ˜¯å¦å†æ¥ä¸€è½®
      refreshUI(
        'æ¸¸æˆé€šå…³ï¼ä½ æˆåŠŸèµ¶ä¸Šèˆªç­å¹¶è§£å†³äº†éœ€æ±‚ï¼\n\næ˜¯å¦å†æ¥ä¸€è½®ï¼Ÿ',
        'ğŸ‘ æ˜¯',
        'ğŸ‘ å¦'
      );
      chapter = 21;
      break;

    case 21:
      // å†æ¥ä¸€è½®ï¼Œé‡ç½®éƒ¨åˆ†çŠ¶æ€
      airportTime = Date.now() / 1000 + 3 * 3600;
      const newFlightTime = formatTime(airportTime);
      $('flight-time').textContent = `èˆªç­èµ·é£: ${newFlightTime}`;
      money = 80;
      goods = {};
      toiletQueueCount = 6;
      drinkWater = 0;
      refreshUI(
        'èƒŒæ™¯ï¼šä½ ç°åœ¨åœ¨å®¶è¿˜æœ‰3å°æ—¶å°±è¦ä¸Šèˆªç­äº†\nä½ æ„Ÿåˆ°æœ‰ç‚¹å£æ¸´å°±å–äº†1ç“¶å†œå¤«å±±æ³‰\n\nä»»åŠ¡ï¼šå–æ°´500ml',
        'ğŸ¥¤ å–æ°´500ml',
        'ğŸ¥¤ å–æ°´500ml'
      );
      chapter = 1;
      break;

    default:
      resetStory();
      break;
  }
}

// æŒ‰é’®2ç‚¹å‡»äº‹ä»¶å¤„ç†ï¼ˆä¸å»æœºåœºåˆ†æ”¯ä¸ºä¸»ï¼Œå¯¹åº”Python _on_button_2ï¼‰
async function handleButton2() {
  logBehavior($('button-2').textContent);
  switch(chapter) {
    case 0:
      // å¼€å§‹æ¸¸æˆ
      airportTime = Date.now() / 1000 + 3 * 3600;
      const flightTimeStr = formatTime(airportTime);
      $('flight-time').textContent = `èˆªç­èµ·é£: ${flightTimeStr}`;
      refreshUI(
        'èƒŒæ™¯ï¼šä½ ç°åœ¨åœ¨å®¶è¿˜æœ‰3å°æ—¶å°±è¦ä¸Šèˆªç­äº†\nä½ æ„Ÿåˆ°æœ‰ç‚¹å£æ¸´å°±å–äº†1ç“¶å†œå¤«å±±æ³‰\n\nä»»åŠ¡ï¼šå–æ°´500ml',
        'ğŸ¥¤ å–æ°´500ml',
        'ğŸ¥¤ å–æ°´500ml'
      );
      chapter = 1;
      break;

    case 1:
      // å–æ°´
      drinkWater += 500;
      refreshUI(
        'å–å®Œæ°´ä¹‹åå‘ç°æ—¶é—´è¿˜æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´\næ˜¯å¦è¦å‡ºå‘å»æœºåœº\nä¸å»æœºåœºå¯ä»¥ç­‰å¾…10åˆ†é’Ÿç­‰åˆ°å‡ºç§Ÿè½¦\nå»æœºåœºåˆ™éœ€è¦åšåœ°é“å»\n\nä»»åŠ¡ï¼šå†³å®šæ˜¯å¦è¦å‡ºå‘å»æœºåœº',
        'ğŸš‡ å»æœºåœº',
        'ğŸš· ä¸å»æœºåœº(ç­‰å¾…10åˆ†é’Ÿ)'
      );
      chapter = 2;
      break;

    case 2:
      // é€‰æ‹©ä¸å»æœºåœºï¼Œç­‰å¾…10åˆ†é’Ÿå‡ºç§Ÿè½¦
      disableButtons();
      await sleep(10 * 60); // 10åˆ†é’Ÿç­‰å¾…
      refreshUI(
        'å‡ºç§Ÿè½¦åˆ°äº†ï¼Œä½ éœ€è¦ä¸‹æ¥¼\n\nä»»åŠ¡ï¼šå·¦å³æŠ¬è…¿30æ¬¡(å·¦æŠ¬ç®—ä¸€æ¬¡ï¼Œå³æŠ¬ä¹Ÿç®—ä¸€æ¬¡)',
        'ğŸƒ å·¦å³æŠ¬è…¿30æ¬¡',
        'ğŸƒ å·¦å³æŠ¬è…¿30æ¬¡'
      );
      chapter = 6;
      break;

    case 3:
      // å»æœºåœºåˆ†æ”¯ï¼šç­‰å¾…5åˆ†é’Ÿåˆ°åœ°é“ç«™ï¼ˆå¤‡ç”¨ï¼‰
      disableButtons();
      await sleep(5 * 60);
      refreshUI(
        'ç°åœ¨ä½ åˆ°äº†åœ°é“ç«™éœ€è¦ç­‰è½¦\nä½†æ˜¯è½¦å¾ˆå¤šéƒ½æ˜¯æ»¡äººçš„\nä½ éœ€è¦ç­‰åˆ°ä¸€éƒ¨æ²¡ä»€ä¹ˆäººçš„è½¦\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°4(æ¯æŠ•ä¸€æ¬¡éœ€è¦ç­‰å¾…3åˆ†é’Ÿ)',
        'ğŸ² æŠ•éª°å­',
        'ğŸ² æŠ•éª°å­'
      );
      chapter = 4;
      break;

    case 4:
      // åœ°é“ç«™æŠ•éª°å­ï¼ˆå¤‡ç”¨ï¼Œç›®æ ‡4ï¼‰
      disableButtons();
      const dice1 = rollDice();
      if (dice1 === 1) {
        refreshUI(
          'æ­å–œï¼éª°å­æŠ•åˆ°1\nç°åœ¨ä½ ä¸Šäº†è½¦\nç­‰å¾…5åˆ†é’Ÿåˆ°è¾¾æœºåœº\n\nä»»åŠ¡ï¼šç­‰å¾…5åˆ†é’Ÿ',
          'â° ç­‰å¾…5åˆ†é’Ÿ',
          'â° ç­‰å¾…5åˆ†é’Ÿ'
        );
        chapter = 5;
      } else {
        refreshUI(
          `éª°å­æŠ•åˆ°${dice1}ï¼Œæœªè¾¾æ ‡\nç°åœ¨ä½ åˆ°äº†åœ°é“ç«™éœ€è¦ç­‰è½¦\nä½†æ˜¯è½¦å¾ˆå¤šéƒ½æ˜¯æ»¡äººçš„\nä½ éœ€è¦ç­‰åˆ°ä¸€éƒ¨æ²¡ä»€ä¹ˆäººçš„è½¦\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1(æ¯æŠ•ä¸€æ¬¡éœ€è¦ç­‰å¾…3åˆ†é’Ÿ)\nå½“å‰éª°å­æ•°ï¼š${dice1}`,
          'ğŸ² é‡æ–°æŠ•éª°å­',
          'ğŸ² é‡æ–°æŠ•éª°å­'
        );
        await sleep(3 * 60);
        chapter = 4;
      }
      break;

    case 5:
      // ç­‰å¾…5åˆ†é’Ÿåˆ°è¾¾æœºåœºï¼ˆå¤‡ç”¨ï¼‰
      disableButtons();
      await sleep(5 * 60);
      drinkWater += 300;
      refreshUI(
        'ä½ åˆ°è¾¾äº†æœºåœºå‰é¢äººå¾ˆå¤š\nä½ éœ€è¦æ’é˜Ÿè¿›å…¥\nä½ è¿˜æ„Ÿåˆ°äº†å£æ¸´å–äº†300mlæ°´\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1(æ¯æ¬¡æŠ•éœ€è¦ç­‰å¾…2åˆ†é’Ÿ)',
        'ğŸ² éª°å­æŠ•åˆ°1',
        'ğŸ² éª°å­æŠ•åˆ°1'
      );
      chapter = 8;
      break;

    case 6:
      // ä¸Šå‡ºç§Ÿè½¦ï¼Œç­‰å¾…15åˆ†é’Ÿ
      refreshUI(
        'ä½ ä¸Šäº†å‡ºç§Ÿè½¦ï¼Œéœ€è¦15åˆ†é’Ÿåˆ°è¾¾æœºåœº\n\nä»»åŠ¡ï¼šç­‰å¾…15åˆ†é’Ÿ',
        'â³ ç­‰å¾…15åˆ†é’Ÿ',
        'â³ ç­‰å¾…15åˆ†é’Ÿ'
      );
      chapter = 7;
      break;

    case 7:
      // å‡ºç§Ÿè½¦ç­‰å¾…15åˆ†é’Ÿåˆ°è¾¾æœºåœº
      disableButtons();
      await sleep(15 * 60);
      drinkWater += 300;
      refreshUI(
        'ä½ åˆ°è¾¾äº†æœºåœºå‰é¢äººå¾ˆå¤š\nä½ éœ€è¦æ’é˜Ÿè¿›å…¥\nä½ è¿˜æ„Ÿåˆ°äº†å£æ¸´å–äº†300mlæ°´\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1(æ¯æ¬¡æŠ•éœ€è¦ç­‰å¾…2åˆ†é’Ÿ)',
        'ğŸ² éª°å­æŠ•åˆ°1+å–æ°´300ml',
        'ğŸ² éª°å­æŠ•åˆ°1+å–æ°´300ml'
      );
      chapter = 8;
      break;

    case 8:
      // æœºåœºæ’é˜ŸæŠ•éª°å­
      disableButtons();
      const dice2 = rollDice();
      if (dice2 === 1) {
        refreshUI(
          'æ­å–œï¼éª°å­æŠ•åˆ°1\nä½ åˆ°è¾¾äº†æœºåœºé‡Œé¢\næ‰¾åˆ°äº†è‡ªå·±çš„ä½ç½®åäº†ä¸‹æ¥\n\nä»»åŠ¡ï¼šèµ°10æ­¥åä¸‹',
          'ğŸš¶ èµ°10æ­¥åä¸‹',
          'ğŸš¶ èµ°10æ­¥åä¸‹'
        );
        chapter = 9;
      } else {
        refreshUI(
          `éª°å­æŠ•åˆ°${dice2}ï¼Œæœªè¾¾æ ‡\nä½ åˆ°è¾¾äº†æœºåœºå‰é¢äººå¾ˆå¤š\nä½ éœ€è¦æ’é˜Ÿè¿›å…¥\nä½ è¿˜æ„Ÿåˆ°äº†å£æ¸´å–äº†300mlæ°´\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1(æ¯æ¬¡æŠ•éœ€è¦ç­‰å¾…2åˆ†é’Ÿ)\nå½“å‰éª°å­æ•°ï¼š${dice2}`,
          'ğŸ² é‡æ–°æŠ•éª°å­',
          'ğŸ² é‡æ–°æŠ•éª°å­'
        );
        await sleep(2 * 60);
        chapter = 8;
      }
      break;

    case 9:
      // æœºåœºå†…é—²é€›
      drinkWater = 500; // é‡ç½®é¥®æ°´é‡ï¼ˆå¯¹åº”Pythoné€»è¾‘ï¼‰
      refreshUI(
        'ä½ å‘ç°è·ç¦»é£æœºèµ·é£æ—¶é—´è¿˜æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´\nå°±å»æœºåœºçš„é™„è¿‘é€›é€›\n\nä»»åŠ¡ï¼šèµ°20æ­¥(ç­‰å¾…2åˆ†é’Ÿ)',
        'ğŸš¶ èµ°20æ­¥(ç­‰å¾…2åˆ†é’Ÿ)',
        'ğŸš¶ èµ°20æ­¥(ç­‰å¾…2åˆ†é’Ÿ)'
      );
      chapter = 10;
      break;

    case 10:
      // é—²é€›ç­‰å¾…2åˆ†é’Ÿï¼Œå‘ç°ä¾¿åˆ©åº—
      disableButtons();
      drinkWater = 500;
      await sleep(2 * 60);
      refreshUI(
        'é€›çš„æ—¶å€™å‘ç°äº†ä¾¿åˆ©åº—\nåœ¨é—¨å£çŠ¹è±«æ˜¯å¦è¦è¿›å»\nèº«ä¸Šå¸¦çš„é’±æ²¡é‚£ä¹ˆå¤š\n\nä»»åŠ¡ï¼šé€‰æ‹©è¿›å»ä¸å¦',
        'ğŸ›’ è¿›å…¥ä¾¿åˆ©åº—',
        'ğŸšª ä¸è¿›å»(åœ¨é—¨å£çŠ¹è±«äº†3åˆ†é’Ÿ)'
      );
      chapter = 11;
      break;

    case 11:
      // ä¸è¿›å…¥ä¾¿åˆ©åº—ï¼ŒçŠ¹è±«3åˆ†é’Ÿ
      disableButtons();
      await sleep(3 * 60); // 3åˆ†é’Ÿç­‰å¾…
      refreshUI(
        'ç°åœ¨ä½ æƒ³å›åˆ°åŸæœ¬çš„åº§ä½äº†\nä½†æ˜¯è¢«æ­£åœ¨ç™»æœºçš„äººå µç€äº†\nä½ åœ¨ä¸€å±‚å±‚åœ°çªç ´äººç¾¤\n\nä»»åŠ¡ï¼šæŠ•éª°å­åˆ°2æ¯æ¬¡æŠ•éª°å­éœ€è¦ç­‰å¾…2åˆ†é’Ÿ',
        'ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­',
        'ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­'
      );
      chapter = 12;
      break;

    case 12:
      // çªç ´äººç¾¤æŠ•éª°å­ï¼ˆç›®æ ‡2ï¼‰
      disableButtons();
      const dice3 = rollDice();
      if (dice3 === 2) {
        refreshUI(
          'æ­å–œï¼éª°å­æŠ•åˆ°2\nç°åœ¨å›åˆ°åŸæœ¬çš„åº§ä½äº†\nä¸çŸ¥é“åšä»€ä¹ˆå°±ååœ¨åŸä½ç©èµ·äº†æ‰‹æœº\næ„Ÿåˆ°äº†å£æ¸´å–äº†300mlæ°´\n\nä»»åŠ¡ï¼šä»»æ„å§¿åŠ¿ä¿æŒ10åˆ†é’Ÿï¼Œå–300mlæ°´',
          'ğŸ“± ä¿æŒ10åˆ†é’Ÿ+å–300mlæ°´',
          'ğŸ“± ä¿æŒ10åˆ†é’Ÿ+å–300mlæ°´'
        );
        chapter = 13;
      } else {
        refreshUI(
          `éª°å­æŠ•åˆ°${dice3}ï¼Œæœªè¾¾æ ‡\nç°åœ¨ä½ æƒ³å›åˆ°åŸæœ¬çš„åº§ä½äº†\nä½†æ˜¯è¢«æ­£åœ¨ç™»æœºçš„äººå µç€äº†\nä½ åœ¨ä¸€å±‚å±‚åœ°çªç ´äººç¾¤\n\nä»»åŠ¡ï¼šæŠ•éª°å­åˆ°2æ¯æ¬¡éª°éª°å­éœ€è¦ç­‰å¾…2åˆ†é’Ÿ\nå½“å‰éª°å­æ•°ï¼š${dice3}`,
          'ğŸ² é‡æ–°æŠ•éª°å­',
          'ğŸ² é‡æ–°æŠ•éª°å­'
        );
        await sleep(2 * 60);
        chapter = 12;
      }
      break;

    case 13:
      // ä¿æŒ10åˆ†é’Ÿè§¦å‘å°¿æ„
      disableButtons();
      drinkWater += 300;
      await sleep(10 * 60);
      refreshUI(
        'çªç„¶ä½ æ„Ÿåˆ°æœ‰ç‚¹æƒ³å°¿å°¿\nä½ åœ¨çŠ¹è±«åˆ°åº•è¦ä¸è¦å»å•æ‰€\n\nä»»åŠ¡ï¼šé€‰æ‹©æ˜¯å¦å»å•æ‰€',
        'ğŸš» å»å•æ‰€(èµ°20æ­¥)',
        'ğŸ“± ä¸å»å•æ‰€ç»§ç»­åˆ·æ‰‹æœº(ç­‰å¾…10åˆ†é’Ÿ)'
      );
      chapter = 14;
      break;

    case 14:
      // ä¸å»å•æ‰€ï¼Œç»§ç»­åˆ·æ‰‹æœº10åˆ†é’Ÿ
      disableButtons();
      await sleep(10 * 60); // 10åˆ†é’Ÿç­‰å¾…
      refreshUI(
        'ä½ ç°åœ¨è§‰å¾—æœ‰ç‚¹å£æ¸´,å–äº†ç‚¹æ°´\n\nä»»åŠ¡ï¼šå–300mlæ°´',
        'ğŸ¥¤ å–300mlæ°´',
        'ğŸ¥¤ å–300mlæ°´'
      );
      chapter = 17;
      break;

    case 15:
      // å•æ‰€æ’é˜ŸæŠ•éª°å­
      disableButtons();
      const dice4 = rollDice();
      if (dice4 === 1) {
        refreshUI(
          'æ­å–œï¼éª°å­æŠ•åˆ°1\nä½ è¿›å…¥äº†å•æ‰€å¯ä»¥å°¿3s,ç„¶åå›åˆ°äº†åŸåº§ä½\n\nä»»åŠ¡ï¼šå°¿3s+èµ°20æ­¥',
          'ğŸš½ å°¿3s+èµ°20æ­¥',
          'ğŸš½ å°¿3s+èµ°20æ­¥'
        );
        chapter = 16;
      } else {
        toiletQueueCount -= 1;
        refreshUI(
          `éª°å­æŠ•åˆ°${dice4}ï¼Œæœªè¾¾æ ‡\nä½ æŠµè¾¾äº†å•æ‰€éœ€è¦æ’é˜Ÿï¼Œè¿˜æœ‰ä¸€äº›äººæ’é˜Ÿ\nå‰é¢æœ‰${toiletQueueCount}ä¸ªäºº\n\nä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1\nå½“å‰éª°å­æ•°ï¼š${dice4}`,
          'ğŸ² é‡æ–°æŠ•éª°å­',
          'ğŸ² é‡æ–°æŠ•éª°å­'
        );
        await sleep(2 * 60);
        chapter = 15;
      }
      break;

    case 16:
      // å°¿åå›åˆ°åº§ä½ï¼Œå£æ¸´å–æ°´
      refreshUI(
        'ä½ ç°åœ¨è§‰å¾—æœ‰ç‚¹å£æ¸´,å–äº†ç‚¹æ°´\n\nä»»åŠ¡ï¼šå–300mlæ°´',
        'ğŸ¥¤ å–300mlæ°´',
        'ğŸ¥¤ å–300mlæ°´'
      );
      chapter = 17;
      break;

    case 17:
      // å±•ç¤ºæŒæœ‰ç‰©å“å’Œé“å…·ä½œç”¨
      drinkWater += 300;
      const goodsText = getGoodsText();
      refreshUI(
        `ç°åœ¨è·ç¦»èˆªç­åªæœ‰åŠå°æ—¶äº†ï¼Œä½ ç°åœ¨æƒ³èµ·äº†ä½ ä¹°çš„ä¸œè¥¿:\n\n${goodsText}`,
        'ğŸ› ä½¿ç”¨é“å…·',
        'ğŸ› ä½¿ç”¨é“å…·'
      );
      chapter = 18;
      break;

    case 18:
      // ä½¿ç”¨é“å…·ï¼Œå‡†å¤‡ç™»æœº
      refreshUI(
        'é©¬ä¸Šé£æœºå°±è¦èµ·é£äº†\nä½ æ„Ÿåˆ°æ¥ä¸åŠäº†å°±é£å¿«åœ°è·‘äº†è¿‡å»\n\nä»»åŠ¡ï¼šé«˜æŠ¬è…¿1åˆ†é’Ÿ+å·¦å³æŠ¬è…¿å…±20æ¬¡',
        'ğŸƒ é«˜æŠ¬è…¿1åˆ†é’Ÿ+å·¦å³æŠ¬è…¿20æ¬¡',
        'ğŸƒ é«˜æŠ¬è…¿1åˆ†é’Ÿ+å·¦å³æŠ¬è…¿20æ¬¡'
      );
      chapter = 19;
      break;

    case 19:
      // æˆåŠŸç™»æœºï¼Œå¯æ’å°¿
      refreshUI(
        'æ­å–œä¸Šäº†é£æœºç°åœ¨å¯ä»¥å°¿å°¿äº†\n\nä»»åŠ¡ï¼šæ’å®Œæ‰€æœ‰çš„å°¿',
        'ğŸ‰ æ’å®Œæ‰€æœ‰çš„å°¿',
        'ğŸ‰ æ’å®Œæ‰€æœ‰çš„å°¿'
      );
      chapter = 20;
      break;

    case 20:
      // æ¸¸æˆé€šå…³ï¼Œè¯¢é—®æ˜¯å¦å†æ¥ä¸€è½®
      refreshUI(
        'æ¸¸æˆé€šå…³ï¼ä½ æˆåŠŸèµ¶ä¸Šèˆªç­å¹¶è§£å†³äº†éœ€æ±‚ï¼\n\næ˜¯å¦å†æ¥ä¸€è½®ï¼Ÿ',
        'ğŸ‘ æ˜¯',
        'ğŸ‘ å¦'
      );
      chapter = 21;
      break;

    case 21:
      // æ‹’ç»å†æ¥ä¸€è½®ï¼Œè¿”å›ä¸»èœå•
      alert('æ„Ÿè°¢æ¸¸ç©ï¼è¿”å›ä¸»èœå•');
      resetStory();
      break;

    default:
      resetStory();
      break;
  }
}

// åˆå§‹åŒ–æ¸¸æˆ
resetStory();

// ç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶
$('button-1').onclick = () => handleButton1();
$('button-2').onclick = () => handleButton2();
</script>
</body>
</html>