<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<title>é£æœºåœº2å°æ—¶å‰§æƒ…ï¼ˆç½‘é¡µç‰ˆï¼‰</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

#root {
    width: 100%;
    max-width: 900px;
    height: 700px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* ---------- é¡¶éƒ¨æ  ---------- */
.top-frame {
    height: 80px;
    background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.top-frame h1 {
    color: white;
    font-size: 28px;
    font-weight: 600;
    letter-spacing: 1px;
}

.water-indicator {
    position: absolute;
    right: 30px;
    background: rgba(255, 255, 255, 0.2);
    padding: 8px 16px;
    border-radius: 20px;
    color: white;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
}

.water-indicator::before {
    content: "ğŸ’§";
    font-size: 18px;
}

/* ---------- ä¸­é—´æ¡†æ¶ ---------- */
.middle-frame {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 30px;
    gap: 25px;
}

.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 10px;
}

.flight-time {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
    color: white;
    padding: 10px 20px;
    border-radius: 25px;
    font-weight: 600;
    font-size: 16px;
    box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
    display: flex;
    align-items: center;
    gap: 8px;
}

.flight-time::before {
    content: "âœˆï¸";
    font-size: 18px;
}

#time-label {
    background: linear-gradient(135deg, #667eea 0%, #764baa 100%);
    color: white;
    padding: 10px 20px;
    border-radius: 25px;
    font-weight: 600;
    font-size: 16px;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

#story-text {
    flex: 1;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border: none;
    border-radius: 15px;
    padding: 30px;
    font-size: 18px;
    line-height: 1.8;
    color: #2d3748;
    resize: none;
    box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

#story-text:focus {
    outline: none;
    box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.15), 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.bottom-bar {
    display: flex;
    justify-content: center;
    gap: 20px;
    padding: 20px 0;
}

/* ---------- æŒ‰é’®æ ·å¼ ---------- */
button {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 15px 40px;
    border-radius: 30px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    position: relative;
    overflow: hidden;
}

button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

button:active {
    transform: translateY(0);
    box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
}

button:disabled {
    background: #cbd5e0;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.btn-left {
    display: flex;
    gap: 20px;
}

/* ---------- åŠ¨ç”»æ•ˆæœ ---------- */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.middle-frame > * {
    animation: fadeIn 0.6s ease-out;
}

/* ---------- å“åº”å¼è®¾è®¡ ---------- */
@media (max-width: 768px) {
    #root {
        height: auto;
        min-height: 600px;
        margin: 10px;
    }

    .top-frame {
        height: 70px;
    }

    .top-frame h1 {
        font-size: 24px;
    }

    .water-indicator {
        right: 20px;
        padding: 6px 12px;
        font-size: 14px;
    }

    .flight-time {
        padding: 8px 16px;
        font-size: 14px;
    }

    .middle-frame {
        padding: 20px;
        gap: 20px;
    }

    #story-text {
        padding: 20px;
        font-size: 16px;
    }

    button {
        padding: 12px 30px;
        font-size: 14px;
    }

    .btn-left {
        flex-direction: column;
        gap: 10px;
    }
}

/* ---------- ç‰¹æ®Šæ•ˆæœ ---------- */
.glass-effect {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.pulse {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% {
        box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7);
    }
    70% {
        box-shadow: 0 0 0 10px rgba(102, 126, 234, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(102, 126, 234, 0);
    }
}
</style>
</head>
<body>
<div id="root">
  <!-- é¡¶éƒ¨æ  -->
  <div class="top-frame">
    <h1>âœˆï¸ é£æœºåœº2å°æ—¶å‰§æƒ…</h1>
    <div class="water-indicator">
      <span id="water-label">0 ml</span>
    </div>
  </div>

  <!-- ä¸­é—´æ¡†æ¶ -->
  <div class="middle-frame">
    <div class="top-bar">
      <div class="flight-time" id="flight-time">èˆªç­èµ·é£: --</div>
      <div id="time-label">--</div>
    </div>

    <textarea id="story-text" readonly>æ¬¢è¿æ¥åˆ°é£æœºåœº2å°æ—¶å‰§æƒ…æ¸¸æˆï¼
ç‚¹å‡»å¼€å§‹æŒ‰é’®å³å¯å¼€å§‹ä½ çš„æœºåœºå†’é™©ä¹‹æ—…</textarea>

    <div class="bottom-bar">
      <div class="btn-left">
        <button id="button-1">ğŸ® å¼€å§‹æ¸¸æˆ</button>
        <button id="button-2">ğŸ¯ å¼€å§‹æ¸¸æˆ</button>
      </div>
    </div>
  </div>
</div>

<script>
/********************************************************************
 *  æ•°æ®å±‚ï¼šä¸ Python ç‰ˆä¸€ä¸€å¯¹åº”
 *******************************************************************/
const user = {name:'ç©å®¶',id:1};               // æ¨¡æ‹Ÿç™»å½•ä¿¡æ¯
let chapter   = 0;                                // å½“å‰ç« èŠ‚
let airportTime = null;                           // èˆªç­æˆªæ­¢æ—¶åˆ»ï¼ˆç§’çº§æ—¶é—´æˆ³ï¼‰
let drinkWater= 0;                                // å·²å–æ°´é‡
let money     = 80;                               // é›¶ç”¨é’±
let goods     = {};                               // å·²è´­é“å…·
const items   = [                                 // å•†åº—è´§æ¶
  ['å«ç”Ÿå·¾',10],['çŸ¿æ³‰æ°´',3],['å«ç”Ÿçº¸',5],
  ['å¤‡ç”¨å†…è£¤',20],['å¤‡ç”¨é•¿è£¤',80],['å¤‡ç”¨æ‰“åº•è£¤',50]
];

/********************************************************************
 *  UI å±‚ï¼šå®Œå…¨å¯¹é½ tkinter ç‰ˆ
 *******************************************************************/
const $ = id=>document.getElementById(id);
$('water-label').textContent = `${drinkWater} ml`;

/* ---- æ—¶é—´æ›´æ–° ---- */
function updateTime(){
  const now = new Date();
  $('time-label').textContent = now.toLocaleString('zh-CN');

  // æ›´æ–°èˆªç­èµ·é£æ—¶é—´æ˜¾ç¤º
  if(airportTime) {
    const flightDate = new Date(airportTime * 1000);
    $('flight-time').textContent = `âœˆï¸ èˆªç­èµ·é£æ—¶é—´: ${flightDate.toLocaleString('zh-CN')}`;
  }

  if(airportTime && airportTime < Date.now()/1000){
    alert('èˆªç­å·²ç»é”™è¿‡,è¯·é‡æ–°å¼€å§‹ï¼ï¼');
    resetStory();
  }
  setTimeout(updateTime,1000);
}
updateTime();

/* ---- é‡ç½® ---- */
function resetStory(){
  chapter = 0;
  airportTime = null;
  drinkWater = 0;
  money = 80;
  goods = {};
  $('flight-time').textContent = 'èˆªç­èµ·é£: --';
  refreshUI('æ¬¢è¿æ¥åˆ°é£æœºåœº2å°æ—¶å‰§æƒ…æ¸¸æˆï¼\nç‚¹å‡»å¼€å§‹æŒ‰é’®å³å¯å¼€å§‹ä½ çš„æœºåœºå†’é™©ä¹‹æ—…','ğŸ® å¼€å§‹æ¸¸æˆ','ğŸ¯ å¼€å§‹æ¸¸æˆ');
}

/* ---- ç»Ÿä¸€åˆ·æ–° ---- */
function refreshUI(text,b1,b2){
  $('story-text').value = text;
  $('button-1').textContent = b1;
  $('button-2').textContent = b2;
  $('water-label').textContent = `${drinkWater} ml`;
  [$('button-1'),$('button-2')].forEach(b=>b.disabled=false);
}

/* ---- æŒ‰é’®ç¦ç”¨ ---- */
function disableButtons(){
  $('button-1').disabled=true;
  $('button-2').disabled=true;
}

/********************************************************************
 *  å‰§æƒ…åˆ†æ”¯ï¼šä¸ Python ç‰ˆ __on_button_1 / __on_button_2 å®Œå…¨ä¸€è‡´
 *******************************************************************/
function logBehavior(btnName){
  // å®é™…é¡¹ç›®å¯å‘ç»™åç«¯
  console.log(`[LOG] ç”¨æˆ·${user.id} ç‚¹å‡» ${btnName}`);
}

/* ä¸»åˆ†æ”¯ */
async function handleButton1(){
  logBehavior($('button-1').textContent);
  if(chapter===0){ startChapter1(); }
  else if(chapter===1){ drink500(); }
  else if(chapter===2){ await walk20(); }
  else if(chapter===3){ await enterShop(); }
  else if(chapter===4){ await diceTo2(); }
  else if(chapter===5){ await keep10min(); }
  else if(chapter===6){ queueDice(); }
  else if(chapter===7){ await diceTo1(); }
  else if(chapter===8){ drink300(); }
  else if(chapter===9){ showGoods(); }
  else if(chapter===10){ highLeg(); }
  else if(chapter===11){ finalPee(); }
  else if(chapter===12){ againYes(); }
  else if(chapter===13){ restartRound(); }
}
async function handleButton2(){
  logBehavior($('button-2').textContent);
  if(chapter===0){ startChapter1(); }
  else if(chapter===1){ drink500(); }
  else if(chapter===2){ await walk20(); }
  else if(chapter===3){ await hesitate3min(); }
  else if(chapter===4){ await diceTo2(); }
  else if(chapter===5){ await keep10min(); }
  else if(chapter===6){ await wait10min(); }
  else if(chapter===7){ await diceTo1(); }
  else if(chapter===8){ drink300(); }
  else if(chapter===9){ showGoods(); }
  else if(chapter===10){ highLeg(); }
  else if(chapter===11){ finalPee(); }
  else if(chapter===12){ againNo(); }
  else if(chapter===13){ restartRound(); }
}

/* ç« èŠ‚å®ç° */
function startChapter1(){
  airportTime = Date.now()/1000 + 2*3600;
  refreshUI(
`èƒŒæ™¯ï¼šä½ ç°åœ¨åœ¨æœºåœºè¿˜æœ‰2å°æ—¶å°±è¦ä¸Šèˆªç­äº†
ä½ çš„æ‰‹ä¸Šæœ‰ä¸€æ¯500mlçš„å¥¶èŒ¶ï¼Œèˆªç­è§„å®šå·²å¼€çš„é¥®æ–™ä¸å…è®¸å¸¦ä¸Šèˆªç­
ä½ å°±å°†å¥¶èŒ¶å…¨å–äº†!

ä»»åŠ¡ï¼šå–æ°´500ml`,
'ğŸ¥¤ å–æ°´500ml','ğŸ¥¤ å–æ°´500ml');
  chapter=1;
}
function drink500(){
  drinkWater=500;
  refreshUI(
`å–å®Œæ°´ä¹‹åå‘ç°æ—¶é—´è¿˜æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´
å°±å»æœºåœºçš„é™„è¿‘é€›é€›

ä»»åŠ¡ï¼šèµ°20æ­¥(ç­‰å¾…2åˆ†é’Ÿ)`,
'ğŸš¶ èµ°20æ­¥(ç­‰å¾…2åˆ†é’Ÿ)','ğŸš¶ èµ°20æ­¥(ç­‰å¾…2åˆ†é’Ÿ)');
  chapter=2;
}
async function walk20(){
  disableButtons();
  await sleep(2*60);
  refreshUI(
`é€›çš„æ—¶å€™å‘ç°äº†ä¾¿åˆ©åº—
åœ¨é—¨å£çŠ¹è±«æ˜¯å¦è¦è¿›å»
èº«ä¸Šå¸¦çš„é’±æ²¡é‚£ä¹ˆå¤š

ä»»åŠ¡ï¼šé€‰æ‹©è¿›å»ä¸å¦`,
'ğŸª è¿›å…¥ä¾¿åˆ©åº—','ğŸ¤” ä¸è¿›å»(åœ¨é—¨å£çŠ¹è±«äº†3åˆ†é’Ÿ)');
  chapter=3;
}
async function enterShop(){
  disableButtons();
  money = await openShop(money);
  refreshUI(
`ç°åœ¨ä½ æƒ³å›åˆ°åŸæœ¬çš„åº§ä½äº†
ä½†æ˜¯è¢«æ­£åœ¨ç™»æœºçš„äººå µç€äº†
ä½ åœ¨ä¸€å±‚å±‚åœ°çªç ´äººç¾¤

ä»»åŠ¡ï¼šæŠ•éª°å­åˆ°2æ¯æ¬¡éª°éª°å­éœ€è¦ç­‰å¾…2åˆ†é’Ÿ`,
'ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­','ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­');
  chapter=4;
}
async function hesitate3min(){
  disableButtons();
  await sleep(3*60);
  refreshUI(
`ç°åœ¨ä½ æƒ³å›åˆ°åŸæœ¬çš„åº§ä½äº†
ä½†æ˜¯è¢«æ­£åœ¨ç™»æœºçš„äººå µç€äº†
ä½ åœ¨ä¸€å±‚å±‚åœ°çªç ´äººç¾¤

ä»»åŠ¡ï¼šæŠ•éª°å­åˆ°2æ¯æ¬¡æŠ•éª°å­éœ€è¦ç­‰å¾…2åˆ†é’Ÿ`,
'ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­','ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­');
  chapter=4;
}
async function diceTo2(){
  disableButtons();
  let rand = rand6();
  if(rand===2){
    drinkWater+=300;
    refreshUI(
`ç°åœ¨å›åˆ°åŸæœ¬çš„åº§ä½äº†
ä¸çŸ¥é“åšä»€ä¹ˆå°±ååœ¨åŸä½ç©èµ·äº†æ‰‹æœº
æ„Ÿåˆ°äº†å£æ¸´å–äº†300mlæ°´

ä»»åŠ¡ï¼šä»»æ„å§¿åŠ¿ä¿æŒ10åˆ†é’Ÿï¼Œå–300mlæ°´`,
'â˜• ä»»æ„å§¿åŠ¿ä¿æŒ10åˆ†é’Ÿï¼Œå–300mlæ°´','â˜• ä»»æ„å§¿åŠ¿ä¿æŒ10åˆ†é’Ÿï¼Œå–300mlæ°´');
    chapter=5;
  }else{
    refreshUI(
`ç°åœ¨ä½ æƒ³å›åˆ°åŸæœ¬çš„åº§ä½äº†
ä½†æ˜¯è¢«æ­£åœ¨ç™»æœºçš„äººå µç€äº†
ä½ åœ¨ä¸€å±‚å±‚åœ°çªç ´äººç¾¤

ä»»åŠ¡ï¼šæŠ•éª°å­åˆ°2æ¯æ¬¡éª°éª°å­éœ€è¦ç­‰å¾…2åˆ†é’Ÿ
å½“å‰éª°å­æ•°ï¼š${rand}`,
'ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­','ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­');
    await sleep(2*60);
    refreshUI(
`ç°åœ¨ä½ æƒ³å›åˆ°åŸæœ¬çš„åº§ä½äº†
ä½†æ˜¯è¢«æ­£åœ¨ç™»æœºçš„äººå µç€äº†
ä½ åœ¨ä¸€å±‚å±‚åœ°çªç ´äººç¾¤

ä»»åŠ¡ï¼šæŠ•éª°å­åˆ°2æ¯æ¬¡éª°éª°å­éœ€è¦ç­‰å¾…2åˆ†é’Ÿ
å½“å‰éª°å­æ•°ï¼š${rand}`,
'ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­','ğŸ² æŠ•éª°å­åˆ°2ç»§ç»­');
  }
}
async function keep10min(){
  disableButtons();
  await sleep(10*60);
  refreshUI(
`çªç„¶ä½ æ„Ÿåˆ°æœ‰ç‚¹æƒ³å°¿å°¿
ä½ åœ¨çŠ¹è±«åˆ°åº•è¦ä¸è¦å»å•æ‰€

ä»»åŠ¡ï¼šé€‰æ‹©æ˜¯å¦å»å•æ‰€`,
'ğŸš½ å»å•æ‰€(èµ°20æ­¥)','ğŸ“± ä¸å»å•æ‰€ç»§ç»­åˆ·æ‰‹æœº(ç­‰å¾…10åˆ†é’Ÿ)');
  chapter=6;
}
async function wait10min(){
  disableButtons();
  await sleep(10*60);
  drinkWater+=300;
  refreshUI(
`ä½ ç°åœ¨è§‰å¾—æœ‰ç‚¹å£æ¸´,å–äº†ç‚¹æ°´

ä»»åŠ¡ï¼šå–300mlæ°´`,
'ğŸ¥¤ å–300mlæ°´','ğŸ¥¤ å–300mlæ°´');
  chapter=9;
}
function queueDice(){
  refreshUI(
`ä½ æŠµè¾¾äº†å•æ‰€éœ€è¦æ’é˜Ÿï¼Œè¿˜æœ‰ä¸€äº›äººæ’é˜Ÿ
å½“å‰å‰é¢æœ‰6ä¸ªäºº

ä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1`,
'ğŸ² æŠ•éª°å­','ğŸ² æŠ•éª°å­');
  chapter=7;
}
async function diceTo1(){
  disableButtons();
  let rand = rand6();
  if(rand===1){
    refreshUI(
`ä½ è¿›å…¥äº†å•æ‰€å¯ä»¥å°¿3s,ç„¶åå›åˆ°äº†åŸåº§ä½

ä»»åŠ¡ï¼šå°¿3s+èµ°20æ­¥`,
'ğŸš½ å°¿3s+èµ°20æ­¥','ğŸš½ å°¿3s+èµ°20æ­¥');
    chapter=8;
  }else{
    await sleep(2*60);
    refreshUI(
`ä½ æŠµè¾¾äº†å•æ‰€éœ€è¦æ’é˜Ÿï¼Œè¿˜æœ‰ä¸€äº›äººæ’é˜Ÿ
å‰é¢æœ‰5ä¸ªäºº

ä»»åŠ¡ï¼šéª°å­æŠ•åˆ°1
å½“å‰éª°å­æ•°${rand}`,
'ğŸ² æŠ•éª°å­','ğŸ² æŠ•éª°å­');
  }
}
function drink300(){
  drinkWater+=300;
  refreshUI(
`ä½ ç°åœ¨è§‰å¾—æœ‰ç‚¹å£æ¸´,å–äº†ç‚¹æ°´

ä»»åŠ¡ï¼šå–300mlæ°´`,
'ğŸ¥¤ å–300mlæ°´','ğŸ¥¤ å–300mlæ°´');
  chapter=9;
}
function showGoods(){
  drinkWater=1100;
  let t='';
  for(let k in goods) t+=k+goods[k]+'ä¸ª\n';
  if(t){
    refreshUI(
`ç°åœ¨è·ç¦»èˆªç­åªæœ‰åŠå°æ—¶äº†ï¼Œä½ ç°åœ¨æƒ³èµ·äº†ä½ ä¹°çš„ä¸œè¥¿:

${t}ä½œç”¨ï¼šå«ç”Ÿå·¾ï¼šå°¿2s  çŸ¿æ³‰æ°´:å°¿1s
å«ç”Ÿçº¸:å°¿3s  å¤‡ç”¨å†…è£¤:å¯ä»¥å¤±ç¦
å¤‡ç”¨é•¿è£¤:å¯ä»¥å°¿ä¸€åŠ  å¤‡ç”¨æ‰“åº•è£¤ï¼šå¯ä»¥å°¿ä¸‰åˆ†ä¹‹ä¸€`,
'ğŸ›ï¸ ä½¿ç”¨é“å…·','ğŸ›ï¸ ä½¿ç”¨é“å…·');
  }else{
    refreshUI(
`ç°åœ¨è·ç¦»èˆªç­åªæœ‰åŠå°æ—¶äº†ï¼Œä½ ç°åœ¨æƒ³èµ·äº†ä½ ä¹°çš„ä¸œè¥¿:`,
'ğŸ›ï¸ ä½¿ç”¨é“å…·','ğŸ›ï¸ ä½¿ç”¨é“å…·');
  }
  chapter=10;
}
function highLeg(){
  refreshUI(
`é©¬ä¸Šé£æœºå°±è¦èµ·é£äº†
ä½ æ„Ÿåˆ°æ¥ä¸åŠäº†å°±é£å¿«åœ°è·‘äº†è¿‡å»

ä»»åŠ¡ï¼šé«˜æŠ¬è…¿1åˆ†é’Ÿ+å·¦å³æŠ¬è…¿å…±20æ¬¡`,
'ğŸƒ é«˜æŠ¬è…¿1åˆ†é’Ÿ+å·¦å³æŠ¬è…¿å…±20æ¬¡','ğŸƒ é«˜æŠ¬è…¿1åˆ†é’Ÿ+å·¦å³æŠ¬è…¿å…±20æ¬¡');
  chapter=11;
}
function finalPee(){
  refreshUI(
`æ­å–œä¸Šäº†é£æœºç°åœ¨å¯ä»¥å°¿å°¿äº†

ä»»åŠ¡ï¼šæ’å®Œæ‰€æœ‰çš„å°¿`,
'ğŸ‰ æ’å®Œæ‰€æœ‰çš„å°¿','ğŸ‰ æ’å®Œæ‰€æœ‰çš„å°¿');
  chapter=12;
}
function againYes(){
  refreshUI(
`æ˜¯å¦å†æ¥ä¸€è½®ï¼Ÿ

`,
'ğŸ‘ æ˜¯','ğŸ‘ å¦');
  chapter=13;
}
function againNo(){
  alert('è¿”å›ä¸»èœå•ï¼ˆæ­¤å¤„ä»…æ¼”ç¤ºï¼‰');
  resetStory();
}
function restartRound(){
  airportTime = Date.now()/1000 + 2*3600;
  money=0; goods={};
  startChapter1();
}

/********************************************************************
 *  å·¥å…·å‡½æ•°
 *******************************************************************/
const sleep = t=>new Promise(r=>setTimeout(r,t*1000));
const rand6 = ()=>Math.floor(Math.random()*6)+1;

/********************************************************************
 *  å•†åº—å¼¹çª—ï¼ˆæ¨¡æ‹Ÿ tkinter Shopping çª—å£ï¼‰
 *******************************************************************/
async function openShop(initMoney){
  let m = initMoney;
  let g = {...goods};
  while(true){
    let list = items.map((it,i)=>`${i}. ${it[0]} ${it[1]}å…ƒ`).join('\n');
    let ans = prompt(`å°å°å•†åº—\n${list}\n\næŒæœ‰é‡‘é’±: ${m}å…ƒ\nè¾“å…¥åºå·è´­ä¹°ï¼Œç•™ç©ºæˆ–å–æ¶ˆé€€å‡º`);
    if(ans===null || ans==='') break;
    let idx = parseInt(ans);
    if(isNaN(idx) || idx<0 || idx>=items.length){ alert('åºå·æ— æ•ˆ'); continue; }
    let [name,price] = items[idx];
    if(m<price){ alert('ä½™é¢ä¸è¶³'); continue; }
    if(!confirm(`æ˜¯å¦èŠ±è´¹${price}å…ƒè´­ä¹°${name}ï¼Ÿ`)) continue;
    m-=price;
    g[name] = (g[name]||0)+1;
    alert(`è´­ä¹°æˆåŠŸï¼å·²è·å¾—${name}`);
  }
  goods=g; money=m;
  return m;
}

/********************************************************************
 *  ç»‘å®šæŒ‰é’®
 *******************************************************************/
$('button-1').onclick = ()=>handleButton1();
$('button-2').onclick = ()=>handleButton2();
</script>
</body>
</html>